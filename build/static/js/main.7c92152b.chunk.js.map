{"version":3,"sources":["store/config.js","store/reducer.ts","store/index.ts","components/Header.tsx","components/course/ArticleContent.tsx","components/course/ArticleTOC.tsx","components/course/Article.tsx","components/course/Chapter.tsx","store/actions.ts","components/Course.tsx","components/Catalog.tsx","components/NotFound.tsx","App.tsx","index.tsx","serviceWorker.ts"],"names":["baseApiUrl","combineReducers","course","state","articles","activeArticle","path_ids_map","action","type","Object","assign","id","toc","ast","activeTocHash","tocHash","store","createStore","reducer","applyMiddleware","thunkMiddleware","Page","className","href","src","alt","placeholder","connect","content","location","dispatch","useLocation","hash","win","window","useEffect","tObj","document","getElementById","replace","removeEventListener","utils","scrollPosition","scrollTo","left","top","offsetTop","behavior","onscroll","e","pageYOffset","documentElement","scrollTop","addEventListener","name","dangerouslySetInnerHTML","__html","anchorHash","slice","renderedToc","activeAnchorHash","c","length","createHashByTOCName","n","map","subToc","RenderTocItem","level","key","renderToc","activateTOCAnchor","tocAnchorHash","createTOCAnchorNameByHash","tocs","push","activeName","subTocContent","onClick","withRouter","useState","mdContent","setMDContent","md","MarkdownIt","html","xhtmlOut","typographer","highlight","str","lang","hljs","getLanguage","value","__","escapeHtml","use","MarkdownItAnchor","permalink","permalinkBefore","require","default","callback","render","parseMD","ArticleContent","ArticleTOC","useParams","courseId","articleId","list","iterate","articleMap","activeArticleId","sort","a","b","seq","item","subMenus","iconStyle","aClass","parent_id","is_active","is_open","active","children","url","to","_iteratePathIds","parentIds","pathIdsMap","values","path_ids","concat","_setActiveArticlePath","paths","currArticle","find","element","_fetchArticle","request","config","resp","detail","fetchCourse","summary","parseInt","start_article_id","actions","Chapter","Article","App","path","Course","exact","Catalog","NotFound","ReactDOM","serviceWorker","Boolean","hostname","match","unregister","navigator","ready","then","registration","catch","error","console","message"],"mappings":"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","file":"static/js/main.7c92152b.chunk.js","sourcesContent":["// const baseApiUrl = 'http://api.magicmooc.org/';\nconst baseApiUrl = 'https://mooc-api.banyuan.club/';\n\nexport default {\n    baseApiUrl\n}","import { combineReducers } from 'redux'\n\ninterface CouseState {\n    articles: Array<any>,\n    activeArticle: any\n    path_ids_map: any,\n    [propName: string]: any\n}\nfunction course(state: CouseState = {\n    articles: [],\n    activeArticle: {},\n    path_ids_map: {},\n}, action: any) {\n    switch (action.type) {\n        case 'COURSE_FETCHED':\n            return Object.assign({}, state, action.course);\n    }\n    return state;\n}\n\nfunction activeTocHash(state = '', action: any) {\n    switch (action.type) {\n        case 'TOC_ACTIVATE':\n            return action.tocHash;\n    }\n    return state;\n}\n\n\nfunction activeArticle(state = { id: 0 }, action: any) {\n    switch (action.type) {\n        case 'ARTICLE_ACTIVATE':\n            return Object.assign({}, state, action.activeArticle);\n    }\n    return state;\n}\n\nfunction toc(state = {}, action: any) {\n    switch (action.type) {\n        case 'TOC_REFRESH':\n            return Object.assign({}, state, action.ast) || {};\n    }\n    return state;\n}\n\nexport default combineReducers({\n    course,\n    activeArticle,\n    toc,\n    activeTocHash,\n})\n","import thunkMiddleware from 'redux-thunk'\nimport { createStore, applyMiddleware } from 'redux'\nimport reducer from './reducer'\n\nconst store = createStore(reducer, applyMiddleware(thunkMiddleware))\n// store.dispatch(fetchCourse());\nexport default store","import React from 'react'\n\nexport default function Page() {\n    return (\n        <header className=\"header\">\n            <div className=\"header-left-column\">\n                <div className=\"mobile-button\">\n                    <i className=\"fas fa-bars\"></i>\n                </div>\n                <div className=\"header-logo\">\n                    <div className=\"mobile-logo\">\n                        <a href=\"/\" className=\"logo-link\">\n                            <img src=\"/assets/images/logo.svg\" alt=\"logo\" />\n                        </a>\n                    </div>\n                    <div className=\"desktop-logo\">\n                        <a href=\"/\" className=\"logo-link\">\n                            <img src=\"/assets/images/logo.svg\" alt=\"logo\" />\n                        </a>\n                    </div>\n                </div>\n                <div className=\"mobile-button\">\n                    <i className=\"fas fa-search\"></i>\n                </div>\n            </div>\n            <div className=\"header-inner-wrapper\">\n                <div className=\"header-inner\">\n                    <div className=\"item\">\n                        <a href=\"/courses\">\n                            <span>Catalog</span>\n                        </a>\n                    </div>\n                    <div className=\"item\">\n                        <a href=\"/\">\n                            <span>About</span>\n                        </a>\n                    </div>\n                    <div className=\"item\">\n                        <a href=\"/\">\n                            <span>Term</span>\n                        </a>\n                    </div>\n                    <div className=\"item\">\n                        <a href=\"/\">\n                            <span>Privacy</span>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div className=\"search-input-wrapper\">\n                <div className=\"input-container\">\n                    <i className=\"fa fa-search\"></i>\n                    <input placeholder=\"Search...\" />\n                </div>\n            </div>\n        </header>\n    )\n}","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { useLocation } from 'react-router-dom'\n\nconst mapStateToProps = (state: any) => {\n    return {\n        course: state.course,\n        activeTocHash: state.activeTocHash,\n    }\n}\nexport default connect(mapStateToProps)(ArticleContent)\n\nfunction ArticleContent({ course, content, activeTocHash, dispatch }: any) {\n    const location = useLocation();\n    activeTocHash = location.hash || activeTocHash;\n    let win:any = window;\n    useEffect(() => {\n        if (!content) return;\n        if (activeTocHash && location.hash) {\n            const tObj: any = document.getElementById(activeTocHash.replace(/^#/, ''));\n            if (tObj) {\n                win.removeEventListener(\"scroll\", win.utils.scrollPosition);\n                window.scrollTo({\n                    left: 0,\n                    top: tObj.offsetTop,\n                    behavior: 'smooth'\n                })\n                window.onscroll = (e:any) => {\n                    let currentScrollOffset = window.pageYOffset || document.documentElement.scrollTop\n                    if (currentScrollOffset === tObj.offsetTop) {\n                        window.onscroll = null;\n                        win.addEventListener(\"scroll\", win.utils.scrollPosition);\n                    }\n                }\n                // setTimeout(function(){\n                //     win.addEventListener(\"scroll\", win.utils.scrollPosition);\n                // }, 2000)\n            }\n        }\n\n    })\n    return (\n        <div className=\"page-container\">\n            <div className=\"page-header\">\n                <div className=\"page-header-inner\">\n                    <h1>{course.activeArticle.name}</h1>\n                    <i className=\"fas fa-list-ul mobile-toc-icon\"></i>\n                </div>\n            </div>\n            <div className=\"page-body\" dangerouslySetInnerHTML={{ __html: content }}>\n            </div>\n            <div className=\"page-footer\">\n            </div>\n        </div>\n    )\n}","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { useLocation } from 'react-router-dom'\n\nconst mapStateToProps = (state: any) => {\n    return {\n        toc: state.toc\n    }\n}\n\nexport default connect(mapStateToProps)(ArticleTOC)\nfunction ArticleTOC({ toc, dispatch }: any) {\n    const location  = useLocation();\n    const anchorHash = location.hash.slice(1);\n    const renderedToc = renderToc(toc, anchorHash);\n    useEffect(()=>{\n        win.utils.activateTOCAnchor(anchorHash, true)\n        dispatch({\n            type: \"TOC_ACTIVATE\",\n            tocHash: activeTocHash\n        })\n    })\n    return (\n        <div className=\"page-side\">\n            <div className=\"sticky-container\">\n                <div className=\"toc-wrapper\">\n                    <div className=\"toc-inner\">\n                        <div className=\"toc-inner-content\">\n                            <div className=\"indicator\" id=\"indicator\"></div>\n                            <div className=\"toc-header\">\n                                <i className=\"fas fa-list-ul toc-icon\"></i>\n                                <span className=\"toc-title\">CONTENTS</span>\n                            </div>\n                            <div className=\"toc-content\">\n                                <ul className=\"toc-items\">\n                                    {renderedToc}\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    )\n}\n\nlet activeTocHash = '';\nconst win:any = window;\nfunction renderToc(toc: any, activeAnchorHash: string) {\n    if (!toc || !toc.c || !toc.c.length) return;\n    if (!activeAnchorHash) {\n        activeAnchorHash = win.utils.createHashByTOCName(toc.c[0].n); \n    }\n\n    const content = toc.c.map((subToc: any) => {\n        return <RenderTocItem level=\"1\" key={subToc.n} toc={subToc} activeAnchorHash={activeAnchorHash} />;\n    })\n    return (content);\n}\n\nfunction RenderTocItem({ level, toc, activeAnchorHash }: any) {\n    activeAnchorHash = activeAnchorHash || '';\n    let anchorHash = win.utils.createHashByTOCName(toc.n);\n    let tocAnchorHash = win.utils.createTOCAnchorNameByHash(anchorHash);\n    win.tocs.push(anchorHash)\n\n    let activeName = (toc.n && activeAnchorHash == anchorHash) ? 'active' : ''\n    if (activeName) {\n        activeTocHash = anchorHash\n    }\n\n    let subTocContent = [];\n    if (toc.c) {\n        subTocContent = toc.c.map((subToc: any) => {\n            return <RenderTocItem key={subToc.n} toc={subToc} activeAnchorHash={activeAnchorHash} />;\n        })\n    }\n    return (\n        <li id={tocAnchorHash}>\n            <a href={'#' + anchorHash} onClick={()=>{\n                win.utils.activateTOCAnchor(anchorHash, true)\n            }} className={activeName}><div>{toc.n}</div></a>\n            {subTocContent.length > 0 &&\n                <ul>\n                    {subTocContent}\n                </ul>\n            }\n        </li>\n    );\n}","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\n\nimport ArticleContent from './ArticleContent'\nimport ArticleTOC from './ArticleTOC'\nimport MarkdownIt from 'markdown-it';\nimport MarkdownItAnchor from 'markdown-it-anchor'\n//  import MarkdownItTocDoneRight from 'markdown-it-toc-done-right'\nimport hljs from 'highlight.js';\nimport 'highlight.js/styles/solarized-dark.css';\nimport { withRouter } from 'react-router-dom'\n\nconst mapStateToProps = (state: any) => {\n    return {\n        course: state.course,\n    }\n}\n\nfunction parseMD(course: any, dispatch: any) {\n    const mdContent = course.activeArticle && course.activeArticle.content || '';\n\n    function tocCallback(html: any, ast: any) {\n        dispatch({\n            type: 'TOC_REFRESH',\n            ast\n        })\n    };\n\n    const md: any = MarkdownIt({\n        html: true,\n        xhtmlOut: true,\n        typographer: true,\n        highlight: function (str, lang) {\n            if (lang && hljs.getLanguage(lang)) {\n                try {\n                    return '<pre class=\"hljs\"><code>' +\n                        hljs.highlight(lang, str, true).value +\n                        '</code></pre>';\n                } catch (__) { }\n            }\n\n            return '<pre class=\"hljs\"><code>' + md.utils.escapeHtml(str) + '</code></pre>';\n        }\n    }).use(MarkdownItAnchor, {\n        permalink: true,\n        permalinkBefore: true,\n        // permalinkSymbol: '§',\n    }).use(require('markdown-it-toc-done-right').default, {\n        callback: tocCallback\n    });\n    return md.render(mdContent)\n}\n\nexport default connect(mapStateToProps)(withRouter(Article))\n\nfunction Article({ course, dispatch }: any) {\n    const  [mdContent, setMDContent] = useState('');\n    useEffect(() => {\n        if (course.id) {\n            const content = parseMD(course, dispatch);\n            if (mdContent !== content) {\n                setMDContent(content);\n            }\n        }\n    }, [course]);\n    return (\n        <div className=\"whole-content-page\">\n            <div className=\"whole-content-sticky\">\n                <ArticleContent course={course} content={mdContent}></ArticleContent>\n                <ArticleTOC />\n            </div>\n        </div>\n    )\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link, useParams } from 'react-router-dom'\n\nconst mapStateToProps = (state: any) => {\n    return {\n        course: state.course,\n    }\n}\nexport default connect(mapStateToProps)(Chapter)\nfunction Chapter({ course, dispatch }: any) {\n    const {courseId, articleId} =  useParams();\n    const list = iterate(course.articles, courseId, articleId);\n    return (\n        <div className=\"content-nav\" id=\"sidebar\">\n            <div className=\"content-nav-inner\">\n                <div className=\"course-name\">{course.name}</div>\n                <ul>\n                    {list}\n                </ul>\n            </div>\n        </div>\n    )\n}\n\nfunction iterate(articleMap: Array<any>, courseId:string, activeArticleId:string, level?: number): any {\n    level = level || 1;\n    let articles = articleMap;\n    // Object.values(articleMap);\n    articles = articles.sort(function(a:any, b:any):number {\n        return (a.seq < b.seq) ? -1: 1;\n    })\n    return articles.map((item: any) => {\n        let subMenus = <></>;\n        let iconStyle = 'fas';\n        let aClass = !item.parent_id && 'top' || '';\n        if (item.is_active) {\n            aClass += ' active';\n        }\n        if (item.id == activeArticleId) {\n            item.is_open = true;\n            item.active = true;\n        }\n        if (item.children) {\n            if (item.is_open) {\n                iconStyle += ' fa-chevron-down'\n                level = level || 1;\n                subMenus = iterate(item.children, courseId, activeArticleId, level + 1);\n            } else {\n                iconStyle += ' fa-chevron-right'\n            }\n        }\n        let url = `/course/${courseId}/${item.id}`;\n        return <li key={item.name}>\n            <Link className={aClass} to={url}>\n                <span>{item.name}</span>\n                {item.children ? <i className={iconStyle}></i> : ''}\n            </Link>\n            {!item.children ? '' :\n                <ul className=\"sub-menu\">\n                    {subMenus}\n                </ul>\n            }\n        </li>\n    });\n}","import { Course } from '../datatypes'\nimport { request } from 'graphql-request'\nimport config from './config';\n\nfunction _iteratePathIds(articles: Array<any>, parentIds?: Array<number>) {\n    let pathIdsMap: any = {}\n    Object.values(articles).map(item => {\n        parentIds = parentIds || []\n        item.path_ids = parentIds.concat(item.id);\n        pathIdsMap[item.id] = item.path_ids;\n        if (item.children) {\n            const b = _iteratePathIds(item.children, item.path_ids);\n            pathIdsMap = Object.assign(pathIdsMap, b)\n        }\n    })\n    return pathIdsMap;\n}\n\nfunction _setActiveArticlePath(articles: Array<any>, paths: Array<number>) {\n    paths = paths || [];\n    // const currArticle = articles[paths[0]]; // for branch 'master', it's a map\n    const currArticle = articles.find(element => element.id ==  paths[0]);\n    if (!currArticle) return;\n    currArticle.is_open = true;\n    if (paths.length == 1) { // 路径中的最后一个节点(当前节点)\n        currArticle.is_active = true;\n    }\n    if (currArticle.children) {\n        _setActiveArticlePath(currArticle.children, paths.slice(1));\n    }\n}\nasync function _fetchArticle(articleId: number) {\n    articleId =  articleId / 1;\n    const query = `query($id: Int!){\n        detail (id: $id){\n            id,name,content\n        }\n    }`;\n    const resp = await request(config.baseApiUrl + 'article', query, {id: articleId});\n    return resp.detail;\n};\n\nexport function fetchCourse(courseId?: number, articleId?: number) {\n    courseId = courseId || 10;\n    let course: Course = { \n        articles: [] \n    };\n    return async function (dispatch: any) {\n        const query = `query($id: Int!){\n            summary (id: $id) {\n                id,name,summary,start_article_id,activeArticle{\n                        id,name,content\n                    },articles {\n                    id,name,seq, parent_id,level,children {\n                        id,name,seq,parent_id,level,children {\n                            id,name,seq,parent_id,level\n                        }\n                    }\n                }\n            }\n        }`;\n        courseId = courseId / 1;\n        const resp = await request(config.baseApiUrl + 'course', query, {id: courseId});\n        course = resp.summary;\n    \n        if (!articleId) {\n            articleId =  parseInt(course.start_article_id);\n        } else {\n            course.activeArticle = await _fetchArticle(articleId);\n        }\n\n        course.path_ids_map = _iteratePathIds(course.articles);\n        _setActiveArticlePath(course.articles, course.path_ids_map[articleId])\n\n        dispatch({\n            type: 'COURSE_FETCHED',\n            course: course\n        })\n    }\n};\n\nexport default {\n    fetchCourse,\n}","import React, { useEffect } from 'react'\nimport Article from './course/Article'\nimport Chapter from './course/Chapter'\nimport actions from '../store/actions'\nimport { useParams } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nconst mapStateToProps = (state: any) => {\n    return {\n    }\n}\nexport default connect(mapStateToProps)(Course)\nfunction Course({ dispatch}: any) {\n    let { courseId, articleId } = useParams();\n    courseId = courseId || 10;\n    useEffect(() => {\n        dispatch(actions.fetchCourse(courseId, articleId))\n    }, [courseId, articleId])\n    return (\n        <div className=\"body-container\">\n            <Chapter />\n            <Article />\n        </div>\n    )\n}","import React from 'react'\nimport '../assets/styles/catalog.less'\n\nexport default function () {\n    // https://www.codecademy.com/catalog/subject/all\n    return (\n        <ul className=\"catalog\">\n            <li className=\"card-item\">\n                <a href=\"/course/10\">\n                    <div className=\"card-item-inner\">\n                        <div className=\"logo\">\n                            <img alt=\"course title\" src=\"/assets/images/2.svg\" />\n                        </div>\n                        <div className=\"summary\">\n                            <h3 className=\"title\">\n                                C Language\n                            </h3>\n                            <p className=\"intro\">\n                                Looking for an introduction to the theory behind programming? Master C while learning data structures, algorithms, and more!\n                            </p>\n                            <ul className=\"tags\">\n                                <li>C</li>\n                                <li>Data Structure</li>\n                                <li>Command Line</li>\n                                <li>Git</li>\n                            </ul>\n                        </div>\n                    </div>\n                </a>\n            </li>\n            <li className=\"card-item\">\n                <a href=\"/course/20\">\n                    <div className=\"card-item-inner\">\n                        <div className=\"logo\">\n                            <img alt=\"course title\" src=\"/assets/images/1.svg\" />\n                        </div>\n                        <div className=\"summary\">\n                            <h3 className=\"title\">\n                            Foundation of CS\n                            </h3>\n                            <p className=\"intro\">\n                                Interested in learning how to code, but unsure where to start? This is the path for you!\n                            </p>\n                            <ul className=\"tags\">\n                                <li>Computer Science History</li>\n                                <li>Career Exploration</li>\n                                <li>Application</li>\n                            </ul>\n                        </div>\n                    </div>\n                </a>\n            </li>\n        </ul>\n    )\n}","import React from 'react'\n\nexport default function() {\n    return (\n        <div className=\"page-not-found\">\n            <h1>Page Not Found.</h1>\n        </div>\n    )\n}","import React from 'react'\nimport { Provider} from 'react-redux'\nimport { BrowserRouter as Router, Switch, Route, Redirect} from 'react-router-dom'\nimport store from './store/index';\n\nimport Header from './components/Header'\nimport Course from './components/Course'\nimport Catalog from './components/Catalog'\nimport NotFound from './components/NotFound'\n\nexport default function App() {\n    return (\n        <Provider store={store}>\n            <Router>\n                <div>\n                    <Header></Header>\n                    <Switch>\n                        <Route path=\"/course/:courseId/:articleId?\">\n                            <Course />\n                        </Route>\n                        <Route path=\"/courses\">\n                            <Redirect to=\"/\"/>\n                        </Route>\n                        <Route exact path=\"/index.html\">\n                            <Redirect to=\"/\"/>\n                        </Route>\n                        <Route exact path=\"/\">\n                            <Catalog />\n                        </Route>\n                        <Route path=\"*\">\n                            <NotFound />\n                        </Route>\n                    </Switch>\n                </div>\n            </Router>\n        </Provider>\n    )\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  // <React.StrictMode>\n    <App />\n  // </React.StrictMode>\n  ,document.getElementById('root')\n);\n\nserviceWorker.unregister();\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n"],"sourceRoot":""}