(this["webpackJsonpmagic-mooc"]=this["webpackJsonpmagic-mooc"]||[]).push([[2],{119:function(e,a,t){e.exports=t(401)},394:function(e,a,t){},401:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(71),i=t.n(r),l=t(31),s=t(82),o=t(81),u=t(17),m=t(9),d=t(10),v=t.n(d),f=t(6);function h(){var e=Object(m.a)(["\n  type TOC {\n    l: Int,\n    n: String,\n    c: [TOC]\n  }\n\n  extend type Query {\n    toc: String,\n    activeTocHash: String\n  }\n  extend type ArticleTreeType {\n    is_open: Boolean,\n    is_active: Boolean\n  }\n\n  extend type Mutation {\n    updateTOCData(toc: TOC!): void\n  }\n"]);return h=function(){return e},e}var E=v()(h()),p={ArticleTreeType:{is_open:function(e,a,t){t.cache;return!1},is_active:function(e,a,t){t.cache;return!1}},Mutation:{updateTOCData:function(e,a,t){var n=a.toc;t.cache.writeQuery({query:f.h,data:{toc:n}})}}},g=t(61),b=t(18),N=t(44);function O(){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"header-left-column"},c.a.createElement("div",{className:"mobile-button"},c.a.createElement("i",{className:"fas fa-bars"})),c.a.createElement("div",{className:"header-logo"},c.a.createElement("div",{className:"mobile-logo"},c.a.createElement("a",{href:"/",className:"logo-link"},c.a.createElement("img",{src:"/assets/images/logo.svg",alt:"logo"}))),c.a.createElement("div",{className:"desktop-logo"},c.a.createElement("a",{href:"/",className:"logo-link"},c.a.createElement("img",{src:"/assets/images/logo.svg",alt:"logo"})))),c.a.createElement("div",{className:"mobile-button"},c.a.createElement("i",{className:"fas fa-search"}))),c.a.createElement("div",{className:"header-inner-wrapper"},c.a.createElement("div",{className:"header-inner"},c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/courses"},c.a.createElement("span",null,"Catalog"))),c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/"},c.a.createElement("span",null,"About"))),c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/"},c.a.createElement("span",null,"Term"))),c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/"},c.a.createElement("span",null,"Privacy"))))),c.a.createElement("div",{className:"search-input-wrapper"},c.a.createElement("div",{className:"input-container"},c.a.createElement("i",{className:"fa fa-search"}),c.a.createElement("input",{placeholder:"Search..."}))))}var y=t(21),j=t(8);function w(e){var a=e.article,t=e.mdContent,r=Object(N.g)(),i=Object(j.c)(f.g).data,l=r.hash||i&&i.activeTocHash,s=window;return Object(n.useEffect)((function(){if(t&&l&&r.hash){var e=document.getElementById(l.replace(/^#/,""));e&&(s.removeEventListener("scroll",s.utils.scrollPosition),window.scrollTo({left:0,top:e.offsetTop,behavior:"smooth"}),window.onscroll=function(a){(window.pageYOffset||document.documentElement.scrollTop)===e.offsetTop&&(window.onscroll=null,s.addEventListener("scroll",s.utils.scrollPosition))})}})),c.a.createElement("div",{className:"page-container"},c.a.createElement("div",{className:"page-header"},c.a.createElement("div",{className:"page-header-inner"},c.a.createElement("h1",null,a&&a.name),c.a.createElement("i",{className:"fas fa-list-ul mobile-toc-icon"}))),c.a.createElement("div",{className:"page-body",dangerouslySetInnerHTML:{__html:t}}),c.a.createElement("div",{className:"page-footer"}))}function C(){var e,a=Object(j.a)(),t=Object(N.g)().hash.slice(1),r=Object(j.c)(f.h).data;return r&&(e=function(e,a){if(!e||!e.c||!e.c.length)return;a||(a=_.utils.createHashByTOCName(e.c[0].n));return e.c.map((function(e){return c.a.createElement(T,{level:"1",key:e.n,toc:e,activeAnchorHash:a})}))}(r.toc,t)),Object(n.useEffect)((function(){_.utils.activateTOCAnchor(t,!0),a.writeData({data:{activeTocHash:t}})}),[t]),c.a.createElement("div",{className:"page-side"},c.a.createElement("div",{className:"sticky-container"},c.a.createElement("div",{className:"toc-wrapper"},c.a.createElement("div",{className:"toc-inner"},c.a.createElement("div",{className:"toc-inner-content"},c.a.createElement("div",{className:"indicator",id:"indicator"}),c.a.createElement("div",{className:"toc-header"},c.a.createElement("i",{className:"fas fa-list-ul toc-icon"}),c.a.createElement("span",{className:"toc-title"},"CONTENTS")),c.a.createElement("div",{className:"toc-content"},c.a.createElement("ul",{className:"toc-items"},e)))))))}var _=window;function T(e){e.level;var a=e.toc,t=e.activeAnchorHash;t=t||"";var n=_.utils.createHashByTOCName(a.n),r=_.utils.createTOCAnchorNameByHash(n);_.tocs.push(n);var i=a.n&&t===n?"active":"",l=[];return a.c&&(l=a.c.map((function(e){return c.a.createElement(T,{key:e.n,toc:e,activeAnchorHash:t})}))),c.a.createElement("li",{id:r},c.a.createElement("a",{href:"#"+n,onClick:function(){_.utils.activateTOCAnchor(n,!0)},className:i},c.a.createElement("div",null,a.n)),l.length>0&&c.a.createElement("ul",null,l))}t(129);var I=t(114),A=t.n(I),k=t(115),$=t(93),H=t.n($);var S={parseMD:function(e,a){var n=e?e.content:"";if(!n)return n;var c=A()({html:!0,xhtmlOut:!0,typographer:!0,highlight:function(e,a){if(a&&H.a.getLanguage(a))try{return'<pre class="hljs"><code>'+H.a.highlight(a,e,!0).value+"</code></pre>"}catch(t){}return'<pre class="hljs"><code>'+c.utils.escapeHtml(e)+"</code></pre>"}}).use(k.a,{permalink:!0,permalinkBefore:!0}).use(t(393).default,{callback:function(e,t){a(e,t)}});return c.render(n)},updateClientCourse:function(e,a){var t=parseInt(e.start_article_id);return a&&(t=a.id,e.activeArticle=a),e.path_ids_map=function e(a,t){var n={};return Object.values(a).map((function(a){if(t=t||[],a.path_ids=t.concat(a.id),n[a.id]=a.path_ids,a.is_open=!1,a.is_active=!1,a.children){var c=e(a.children,a.path_ids);n=Object.assign(n,c)}return!0})),n}(e.articles),function e(a,t){t=t||[];var n=a.find((function(e){return e.id===t[0]}));n&&(n.is_open=!0,1===t.length&&(n.is_active=!0),n.children&&e(n.children,t.slice(1)))}(e.articles,e.path_ids_map[t]),e}};function q(){var e=Object(N.h)(),a=e.courseId,t=e.articleId,r=Object(n.useState)({activeArticle:{}}),i=Object(y.a)(r,2),l=i[0],s=i[1],o=Object(n.useState)(""),u=Object(y.a)(o,2),m=u[0],d=u[1];t=(t||0)/1,a=(a||0)/1||10;var v=Object(j.c)(f.f,{variables:{courseId:a||0}}).data,h=Object(j.c)(f.a,{variables:{id:t||0}}).data,E=Object(j.b)(f.i),p=Object(y.a)(E,1)[0];return Object(n.useEffect)((function(){if(v||h){var e;h&&h.article.detail?e=h.article.detail:v&&(e=v.course.summary.activeArticle);var a=S.parseMD(e,(function(e,a){p({variables:{toc:a}})}));s(e),d(a)}}),[h,v]),c.a.createElement("div",{className:"whole-content-page"},c.a.createElement("div",{className:"whole-content-sticky"},c.a.createElement(w,{article:l,mdContent:m}),c.a.createElement(C,null)))}function D(){var e=Object(N.h)(),a=e.courseId,t=e.articleId;t=(t||0)/1,a=(a||0)/1||10;var n=Object(j.c)(f.f,{variables:{courseId:a}}).data,r=[];return n&&(r=function e(a,t,n,r){r=r||1;var i=a;return(i=(i=i||[]).sort((function(e,a){return e.seq<a.seq?-1:1}))).map((function(a){var i=c.a.createElement(c.a.Fragment,null),l="fas",s=a.parent_id?"":"top";a.is_active&&(s+=" active"),a.id===n&&(a.is_open=!0,a.active=!0),a.children&&(a.is_open?(l+=" fa-chevron-down",r=r||1,i=e(a.children,t,n,r+1)):l+=" fa-chevron-right");var o="/course/".concat(t,"/").concat(a.id);return c.a.createElement("li",{key:a.name},c.a.createElement(b.b,{className:s,to:o},c.a.createElement("span",null,a.name),a.children?c.a.createElement("i",{className:l}):""),a.children?c.a.createElement("ul",{className:"sub-menu"},i):"")}))}(n.course.summary.articles,a,t)),c.a.createElement("div",{className:"content-nav",id:"sidebar"},c.a.createElement("div",{className:"content-nav-inner"},c.a.createElement("div",{className:"course-name"},{}.name),c.a.createElement("ul",null,r)))}function x(){var e=Object(N.h)(),a=e.courseId,t=e.articleId,r=Object(n.useState)({}),i=Object(y.a)(r,2)[1];t=(t||0)/1,a=(a||0)/1||10;var l=Object(j.c)(f.f,{variables:{courseId:a}}).data,s=Object(j.c)(f.a,{variables:{id:t}}).data;return Object(n.useEffect)((function(){if(l){var e=s&&s.article&&s.article.detail,a=S.updateClientCourse(l.course.summary,e);i(a.activeArticle)}}),[l,s]),c.a.createElement("div",{className:"body-container"},c.a.createElement(D,null),c.a.createElement(q,null))}t(394);var B=function(){return c.a.createElement("ul",{className:"catalog"},c.a.createElement("li",{className:"card-item"},c.a.createElement("a",{href:"/course/10"},c.a.createElement("div",{className:"card-item-inner"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{alt:"course title",src:"/assets/images/2.svg"})),c.a.createElement("div",{className:"summary"},c.a.createElement("h3",{className:"title"},"C Language"),c.a.createElement("p",{className:"intro"},"Looking for an introduction to the theory behind programming? Master C while learning data structures, algorithms, and more!"),c.a.createElement("ul",{className:"tags"},c.a.createElement("li",null,"C"),c.a.createElement("li",null,"Data Structure"),c.a.createElement("li",null,"Command Line"),c.a.createElement("li",null,"Git")))))),c.a.createElement("li",{className:"card-item"},c.a.createElement("a",{href:"/course/20"},c.a.createElement("div",{className:"card-item-inner"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{alt:"course title",src:"/assets/images/1.svg"})),c.a.createElement("div",{className:"summary"},c.a.createElement("h3",{className:"title"},"Foundation of CS"),c.a.createElement("p",{className:"intro"},"Interested in learning how to code, but unsure where to start? This is the path for you!"),c.a.createElement("ul",{className:"tags"},c.a.createElement("li",null,"Computer Science History"),c.a.createElement("li",null,"Career Exploration"),c.a.createElement("li",null,"Application")))))))},L=function(){return c.a.createElement("div",{className:"page-not-found"},c.a.createElement("h1",null,"Page Not Found."))};function M(){return c.a.createElement(b.a,null,c.a.createElement("div",null,c.a.createElement(O,null),c.a.createElement(N.d,null,c.a.createElement(N.b,{path:"/course/:courseId/:articleId?"},c.a.createElement(x,null)),c.a.createElement(N.b,{path:"/courses"},c.a.createElement(N.a,{to:"/"})),c.a.createElement(N.b,{exact:!0,path:"/index.html"},c.a.createElement(N.a,{to:"/"})),c.a.createElement(N.b,{exact:!0,path:"/"},c.a.createElement(B,null)),c.a.createElement(N.b,{path:"*"},c.a.createElement(L,null)))))}var F=t(63),P=(t(90),new s.a),U=new l.a({cache:P,link:new o.a({uri:g.a.baseApiUrl,headers:{"client-name":"Magic Mooc Admin[web]","client-version":"1.0.0"}}),resolvers:p,typeDefs:E});i.a.render(c.a.createElement(u.a,{client:U},c.a.createElement(M,null)),document.getElementById("root")),F.a()},6:function(e,a,t){"use strict";t.d(a,"c",(function(){return h})),t.d(a,"b",(function(){return E})),t.d(a,"f",(function(){return p})),t.d(a,"e",(function(){return g})),t.d(a,"d",(function(){return b})),t.d(a,"a",(function(){return N})),t.d(a,"h",(function(){return O})),t.d(a,"g",(function(){return y})),t.d(a,"i",(function(){return j}));var n=t(9),c=t(10),r=t.n(c);function i(){var e=Object(n.a)(["\n    mutation UpdateTOCData($toc: TOC) {\n        updateTOCData(toc: $toc) @client\n    }\n"]);return i=function(){return e},e}function l(){var e=Object(n.a)(["\n    query FetchActiveTocHash {\n        activeTocHash @client\n    }\n"]);return l=function(){return e},e}function s(){var e=Object(n.a)(["\n    query FetchToc{\n        toc @client\n    }\n"]);return s=function(){return e},e}function o(){var e=Object(n.a)(["\n    query ArticleDetail($id: Int!){\n        article {\n            detail (id: $id){\n                id,name,content\n            }\n        }\n    }\n"]);return o=function(){return e},e}function u(){var e=Object(n.a)(["\n    mutation CourseRemove($id: Int!){\n        course {\n            remove (id: $id){\n                error, message\n            }\n        }\n    }\n"]);return u=function(){return e},e}function m(){var e=Object(n.a)(["\n    mutation CourseSave($data: CourseInputType!){\n        course {\n            save (data: $data){\n                id, name, summary, price\n            }\n        }\n    }\n"]);return m=function(){return e},e}function d(){var e=Object(n.a)(["\n    query CourseSummary($courseId: Int!){\n        course {\n            summary (id: $courseId) {\n                id,name,summary,start_article_id,\n                activeArticle{\n                    id,name,content\n                },\n                articles {\n                    is_open @client, is_active @client, id,name,seq, parent_id,level,children {\n                        is_open @client, is_active @client, id,name,seq,parent_id,level,children {\n                            is_open @client, is_active @client, id,name,seq,parent_id,level\n                        }\n                    }\n                }\n            }\n        }\n    }\n"]);return d=function(){return e},e}function v(){var e=Object(n.a)(["\n    query CourseDetail($id: Int!){\n        course {\n            detail (id: $id){\n                id,name,price,summary\n            }\n        }\n    }\n"]);return v=function(){return e},e}function f(){var e=Object(n.a)(["\n    query CourseList($pageNo: Int){\n        course {\n            list (pageNo: $pageNo){\n                id,name,price,summary\n            }\n        }\n    }\n"]);return f=function(){return e},e}var h=r()(f()),E=r()(v()),p=r()(d()),g=r()(m()),b=r()(u()),N=r()(o()),O=r()(s()),y=r()(l()),j=r()(i())},61:function(e,a,t){"use strict";a.a={baseApiUrl:"https://mooc-api.banyuan.club/"}},63:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function n(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},90:function(e,a,t){}},[[119,4,0,5]]]);
//# sourceMappingURL=main.34ad2c6c.chunk.js.map