(this["webpackJsonpmagic-mooc"]=this["webpackJsonpmagic-mooc"]||[]).push([[2],{102:function(e,a,t){e.exports=t(383)},23:function(e,a,t){"use strict";a.a={baseApiUrl:"https://mooc-api.banyuan.club/"}},378:function(e,a,t){},383:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(41),l=t.n(r),i=(t(72),t(16)),s=t(8),o=t(36),m=t(94),u=t(38);var d=Object(u.c)({course:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{articles:[],activeArticle:{},path_ids_map:{}},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"COURSE_FETCHED":return Object.assign({},e,a.course)}return e},activeArticle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:0},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ARTICLE_ACTIVATE":return Object.assign({},e,a.activeArticle)}return e},toc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"TOC_REFRESH":return Object.assign({},e,a.ast)||{}}return e},activeTocHash:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"TOC_ACTIVATE":return a.tocHash}return e}}),h=Object(u.d)(d,Object(u.a)(m.a));function v(){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"header-left-column"},c.a.createElement("div",{className:"mobile-button"},c.a.createElement("i",{className:"fas fa-bars"})),c.a.createElement("div",{className:"header-logo"},c.a.createElement("div",{className:"mobile-logo"},c.a.createElement("a",{href:"/",className:"logo-link"},c.a.createElement("img",{src:"/assets/images/logo.svg",alt:"logo"}))),c.a.createElement("div",{className:"desktop-logo"},c.a.createElement("a",{href:"/",className:"logo-link"},c.a.createElement("img",{src:"/assets/images/logo.svg",alt:"logo"})))),c.a.createElement("div",{className:"mobile-button"},c.a.createElement("i",{className:"fas fa-search"}))),c.a.createElement("div",{className:"header-inner-wrapper"},c.a.createElement("div",{className:"header-inner"},c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/courses"},c.a.createElement("span",null,"Catalog"))),c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/"},c.a.createElement("span",null,"About"))),c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/"},c.a.createElement("span",null,"Term"))),c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/"},c.a.createElement("span",null,"Privacy"))))),c.a.createElement("div",{className:"search-input-wrapper"},c.a.createElement("div",{className:"input-container"},c.a.createElement("i",{className:"fa fa-search"}),c.a.createElement("input",{placeholder:"Search..."}))))}var E=t(34),p=Object(i.b)((function(e){return{course:e.course,activeTocHash:e.activeTocHash}}))((function(e){var a=e.course,t=e.content,r=e.activeTocHash,l=(e.dispatch,Object(o.g)());r=l.hash||r;var i=window;return Object(n.useEffect)((function(){if(t&&r&&l.hash){var e=document.getElementById(r.replace(/^#/,""));e&&(i.removeEventListener("scroll",i.utils.scrollPosition),window.scrollTo({left:0,top:e.offsetTop,behavior:"smooth"}),window.onscroll=function(a){(window.pageYOffset||document.documentElement.scrollTop)===e.offsetTop&&(window.onscroll=null,i.addEventListener("scroll",i.utils.scrollPosition))})}})),c.a.createElement("div",{className:"page-container"},c.a.createElement("div",{className:"page-header"},c.a.createElement("div",{className:"page-header-inner"},c.a.createElement("h1",null,a.activeArticle.name),c.a.createElement("i",{className:"fas fa-list-ul mobile-toc-icon"}))),c.a.createElement("div",{className:"page-body",dangerouslySetInnerHTML:{__html:t}}),c.a.createElement("div",{className:"page-footer"}))}));var f=Object(i.b)((function(e){return{toc:e.toc}}))((function(e){var a=e.toc,t=e.dispatch,r=Object(o.g)().hash.slice(1),l=function(e,a){if(!e||!e.c||!e.c.length)return;a||(a=N.utils.createHashByTOCName(e.c[0].n));return e.c.map((function(e){return c.a.createElement(b,{level:"1",key:e.n,toc:e,activeAnchorHash:a})}))}(a,r);return Object(n.useEffect)((function(){N.utils.activateTOCAnchor(r,!0),t({type:"TOC_ACTIVATE",tocHash:g})})),c.a.createElement("div",{className:"page-side"},c.a.createElement("div",{className:"sticky-container"},c.a.createElement("div",{className:"toc-wrapper"},c.a.createElement("div",{className:"toc-inner"},c.a.createElement("div",{className:"toc-inner-content"},c.a.createElement("div",{className:"indicator",id:"indicator"}),c.a.createElement("div",{className:"toc-header"},c.a.createElement("i",{className:"fas fa-list-ul toc-icon"}),c.a.createElement("span",{className:"toc-title"},"CONTENTS")),c.a.createElement("div",{className:"toc-content"},c.a.createElement("ul",{className:"toc-items"},l)))))))}));var g="",N=window;function b(e){e.level;var a=e.toc,t=e.activeAnchorHash;t=t||"";var n=N.utils.createHashByTOCName(a.n),r=N.utils.createTOCAnchorNameByHash(n);N.tocs.push(n);var l=a.n&&t==n?"active":"";l&&(g=n);var i=[];return a.c&&(i=a.c.map((function(e){return c.a.createElement(b,{key:e.n,toc:e,activeAnchorHash:t})}))),c.a.createElement("li",{id:r},c.a.createElement("a",{href:"#"+n,onClick:function(){N.utils.activateTOCAnchor(n,!0)},className:l},c.a.createElement("div",null,a.n)),i.length>0&&c.a.createElement("ul",null,i))}var y=t(96),O=t.n(y),w=t(97),_=t(79),T=t.n(_);t(374);var j=Object(i.b)((function(e){return{course:e.course}}))(Object(o.i)((function(e){var a=e.course,r=e.dispatch,l=Object(n.useState)(""),i=Object(E.a)(l,2),s=i[0],o=i[1];return Object(n.useEffect)((function(){if(a.id){var e=function(e,a){var n=e.activeArticle&&e.activeArticle.content||"",c=O()({html:!0,xhtmlOut:!0,typographer:!0,highlight:function(e,a){if(a&&T.a.getLanguage(a))try{return'<pre class="hljs"><code>'+T.a.highlight(a,e,!0).value+"</code></pre>"}catch(t){}return'<pre class="hljs"><code>'+c.utils.escapeHtml(e)+"</code></pre>"}}).use(w.a,{permalink:!0,permalinkBefore:!0}).use(t(375).default,{callback:function(e,t){a({type:"TOC_REFRESH",ast:t})}});return c.render(n)}(a,r);s!==e&&o(e)}}),[a]),c.a.createElement("div",{className:"whole-content-page"},c.a.createElement("div",{className:"whole-content-sticky"},c.a.createElement(p,{course:a,content:s}),c.a.createElement(f,null)))})));var C=Object(i.b)((function(e){return{course:e.course}}))((function(e){var a=e.course,t=(e.dispatch,Object(o.h)()),n=t.courseId,r=t.articleId,l=function e(a,t,n,r){r=r||1;var l=a;return(l=l.sort((function(e,a){return e.seq<a.seq?-1:1}))).map((function(a){var l=c.a.createElement(c.a.Fragment,null),i="fas",o=a.parent_id?"":"top";a.is_active&&(o+=" active"),a.id==n&&(a.is_open=!0,a.active=!0),a.children&&(a.is_open?(i+=" fa-chevron-down",r=r||1,l=e(a.children,t,n,r+1)):i+=" fa-chevron-right");var m="/course/".concat(t,"/").concat(a.id);return c.a.createElement("li",{key:a.name},c.a.createElement(s.b,{className:o,to:m},c.a.createElement("span",null,a.name),a.children?c.a.createElement("i",{className:i}):""),a.children?c.a.createElement("ul",{className:"sub-menu"},l):"")}))}(a.articles,n,r);return c.a.createElement("div",{className:"content-nav",id:"sidebar"},c.a.createElement("div",{className:"content-nav-inner"},c.a.createElement("div",{className:"course-name"},a.name),c.a.createElement("ul",null,l)))}));var A=t(3),k=t.n(A),H=t(12),I=t(37),q=t(23);function x(e,a){var t={};return Object.values(e).map((function(e){if(a=a||[],e.path_ids=a.concat(e.id),t[e.id]=e.path_ids,e.children){var n=x(e.children,e.path_ids);t=Object.assign(t,n)}})),t}function S(e,a){a=a||[];var t=e.find((function(e){return e.id==a[0]}));t&&(t.is_open=!0,1==a.length&&(t.is_active=!0),t.children&&S(t.children,a.slice(1)))}function $(e){return L.apply(this,arguments)}function L(){return(L=Object(H.a)(k.a.mark((function e(a){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a/=1,"query($id: Int!){\n        detail (id: $id){\n            id,name,content\n        }\n    }",e.next=4,Object(I.request)(q.a.baseApiUrl+"article","query($id: Int!){\n        detail (id: $id){\n            id,name,content\n        }\n    }",{id:a});case 4:return t=e.sent,e.abrupt("return",t.detail);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B={fetchCourse:function(e,a){e=e||10;var t={articles:[]};return function(){var n=Object(H.a)(k.a.mark((function n(c){var r;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"query($id: Int!){\n            summary (id: $id) {\n                id,name,summary,start_article_id,activeArticle{\n                        id,name,content\n                    },articles {\n                    id,name,seq, parent_id,level,children {\n                        id,name,seq,parent_id,level,children {\n                            id,name,seq,parent_id,level\n                        }\n                    }\n                }\n            }\n        }",e/=1,n.next=4,Object(I.request)(q.a.baseApiUrl+"course","query($id: Int!){\n            summary (id: $id) {\n                id,name,summary,start_article_id,activeArticle{\n                        id,name,content\n                    },articles {\n                    id,name,seq, parent_id,level,children {\n                        id,name,seq,parent_id,level,children {\n                            id,name,seq,parent_id,level\n                        }\n                    }\n                }\n            }\n        }",{id:e});case 4:if(r=n.sent,t=r.summary,a){n.next=10;break}a=parseInt(t.start_article_id),n.next=13;break;case 10:return n.next=12,$(a);case 12:t.activeArticle=n.sent;case 13:t.path_ids_map=x(t.articles),S(t.articles,t.path_ids_map[a]),c({type:"COURSE_FETCHED",course:t});case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},F=Object(i.b)((function(e){return{}}))((function(e){var a=e.dispatch,t=Object(o.h)(),r=t.courseId,l=t.articleId;return r=r||10,Object(n.useEffect)((function(){a(B.fetchCourse(r,l))}),[r,l]),c.a.createElement("div",{className:"body-container"},c.a.createElement(C,null),c.a.createElement(j,null))}));t(378);var R=function(){return c.a.createElement("ul",{className:"catalog"},c.a.createElement("li",{className:"card-item"},c.a.createElement("a",{href:"/course/10"},c.a.createElement("div",{className:"card-item-inner"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{alt:"course title",src:"/assets/images/2.svg"})),c.a.createElement("div",{className:"summary"},c.a.createElement("h3",{className:"title"},"C Language"),c.a.createElement("p",{className:"intro"},"Looking for an introduction to the theory behind programming? Master C while learning data structures, algorithms, and more!"),c.a.createElement("ul",{className:"tags"},c.a.createElement("li",null,"C"),c.a.createElement("li",null,"Data Structure"),c.a.createElement("li",null,"Command Line"),c.a.createElement("li",null,"Git")))))),c.a.createElement("li",{className:"card-item"},c.a.createElement("a",{href:"/course/20"},c.a.createElement("div",{className:"card-item-inner"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{alt:"course title",src:"/assets/images/1.svg"})),c.a.createElement("div",{className:"summary"},c.a.createElement("h3",{className:"title"},"Foundation of CS"),c.a.createElement("p",{className:"intro"},"Interested in learning how to code, but unsure where to start? This is the path for you!"),c.a.createElement("ul",{className:"tags"},c.a.createElement("li",null,"Computer Science History"),c.a.createElement("li",null,"Career Exploration"),c.a.createElement("li",null,"Application")))))))},U=function(){return c.a.createElement("div",{className:"page-not-found"},c.a.createElement("h1",null,"Page Not Found."))};function P(){return c.a.createElement(i.a,{store:h},c.a.createElement(s.a,null,c.a.createElement("div",null,c.a.createElement(v,null),c.a.createElement(o.d,null,c.a.createElement(o.b,{path:"/course/:courseId/:articleId?"},c.a.createElement(F,null)),c.a.createElement(o.b,{path:"/courses"},c.a.createElement(o.a,{to:"/"})),c.a.createElement(o.b,{exact:!0,path:"/index.html"},c.a.createElement(o.a,{to:"/"})),c.a.createElement(o.b,{exact:!0,path:"/"},c.a.createElement(R,null)),c.a.createElement(o.b,{path:"*"},c.a.createElement(U,null))))))}var D=t(55);l.a.render(c.a.createElement(P,null),document.getElementById("root")),D.a()},55:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function n(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},72:function(e,a,t){}},[[102,4,0,5]]]);
//# sourceMappingURL=main.7c92152b.chunk.js.map