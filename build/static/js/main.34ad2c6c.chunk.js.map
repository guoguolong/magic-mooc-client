{"version":3,"sources":["store/resolvers.ts","components/Header.tsx","components/course/ArticleContent.tsx","components/course/ArticleTOC.tsx","store/apis.tsx","components/course/Article.tsx","components/course/Chapter.tsx","components/Course.tsx","components/Catalog.tsx","components/NotFound.tsx","App.tsx","index.tsx","store/gql-def.js","store/config.js","serviceWorker.ts"],"names":["typeDefs","gql","resolvers","ArticleTreeType","is_open","articleTree","_","cache","is_active","Mutation","updateTOCData","toc","writeQuery","query","FETCH_TOC","data","Page","className","href","src","alt","placeholder","ArticleContent","article","mdContent","location","useLocation","useQuery","FETCH_ACTIVE_TOC_HASH","activeTocHash","hash","win","window","useEffect","tObj","document","getElementById","replace","removeEventListener","utils","scrollPosition","scrollTo","left","top","offsetTop","behavior","onscroll","e","pageYOffset","documentElement","scrollTop","addEventListener","name","dangerouslySetInnerHTML","__html","ArticleTOC","renderedToc","apolloClient","useApolloClient","anchorHash","slice","activeAnchorHash","c","length","createHashByTOCName","n","map","subToc","RenderTocItem","level","key","renderToc","activateTOCAnchor","writeData","id","tocAnchorHash","createTOCAnchorNameByHash","tocs","push","activeName","subTocContent","onClick","parseMD","callback","content","md","MarkdownIt","html","xhtmlOut","typographer","highlight","str","lang","hljs","getLanguage","value","__","escapeHtml","use","MarkdownItAnchor","permalink","permalinkBefore","require","default","ast","render","updateClientCourse","courseObj","articleObj","articleId","parseInt","start_article_id","activeArticle","path_ids_map","iteratePathIds","articles","parentIds","pathIdsMap","Object","values","item","path_ids","concat","children","b","assign","setActiveArticlePath","paths","currArticle","find","element","Article","useParams","courseId","useState","setArticle","setMDContent","summaryData","COURSE_SUMMARY","variables","articleData","ARTICLE_DETAIL","useMutation","UPDATE_TOC_DATA","updateTOC","realArticle","detail","course","summary","newContent","apis","Chapter","list","iterate","articleMap","activeArticleId","sort","a","seq","subMenus","iconStyle","aClass","parent_id","active","url","to","Course","App","path","exact","Catalog","NotFound","InMemoryCache","client","ApolloClient","link","HttpLink","uri","config","baseApiUrl","headers","ReactDOM","serviceWorker","COURSE_LIST","COURSE_DETAIL","COURSE_SAVE","COURSE_REMOVE","Boolean","hostname","match","unregister","navigator","ready","then","registration","catch","error","console","message"],"mappings":"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","file":"static/js/main.34ad2c6c.chunk.js","sourcesContent":["import gql from 'graphql-tag';\n// import { ApolloCache } from 'apollo-cache';\n// import { Resolvers } from 'apollo-client'\nimport { FETCH_TOC } from './gql-def'\nexport const typeDefs = gql`\n  type TOC {\n    l: Int,\n    n: String,\n    c: [TOC]\n  }\n\n  extend type Query {\n    toc: String,\n    activeTocHash: String\n  }\n  extend type ArticleTreeType {\n    is_open: Boolean,\n    is_active: Boolean\n  }\n\n  extend type Mutation {\n    updateTOCData(toc: TOC!): void\n  }\n`;\n\n// type ResolverFn = (\n//   parent: any, \n//   args: any, \n//   { cache } : { cache: ApolloCache<any> }\n// ) => any;\n\n// interface ResolverMap {\n//   [field: string]: ResolverFn;\n// }\n\n// interface AppResolvers extends Resolvers {\n//   Launch: ResolverMap;\n//   Mutation: ResolverMap;\n// }\n\nexport const resolvers = {\n  ArticleTreeType: {\n    is_open: (articleTree, _, { cache }): boolean => {\n      return false;\n    },\n    is_active: (articleTree, _, { cache }): boolean => {\n      return false;\n    }\n  },\n  Mutation: {\n    updateTOCData: (_, { toc }, { cache }): void => {\n      cache.writeQuery({ query: FETCH_TOC, data: { toc } });\n    },\n  },\n};\n","import React from 'react'\n\nexport default function Page() {\n    return (\n        <header className=\"header\">\n            <div className=\"header-left-column\">\n                <div className=\"mobile-button\">\n                    <i className=\"fas fa-bars\"></i>\n                </div>\n                <div className=\"header-logo\">\n                    <div className=\"mobile-logo\">\n                        <a href=\"/\" className=\"logo-link\">\n                            <img src=\"/assets/images/logo.svg\" alt=\"logo\" />\n                        </a>\n                    </div>\n                    <div className=\"desktop-logo\">\n                        <a href=\"/\" className=\"logo-link\">\n                            <img src=\"/assets/images/logo.svg\" alt=\"logo\" />\n                        </a>\n                    </div>\n                </div>\n                <div className=\"mobile-button\">\n                    <i className=\"fas fa-search\"></i>\n                </div>\n            </div>\n            <div className=\"header-inner-wrapper\">\n                <div className=\"header-inner\">\n                    <div className=\"item\">\n                        <a href=\"/courses\">\n                            <span>Catalog</span>\n                        </a>\n                    </div>\n                    <div className=\"item\">\n                        <a href=\"/\">\n                            <span>About</span>\n                        </a>\n                    </div>\n                    <div className=\"item\">\n                        <a href=\"/\">\n                            <span>Term</span>\n                        </a>\n                    </div>\n                    <div className=\"item\">\n                        <a href=\"/\">\n                            <span>Privacy</span>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div className=\"search-input-wrapper\">\n                <div className=\"input-container\">\n                    <i className=\"fa fa-search\"></i>\n                    <input placeholder=\"Search...\" />\n                </div>\n            </div>\n        </header>\n    )\n}","import React, { useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport { useQuery } from '@apollo/react-hooks'\nimport { FETCH_ACTIVE_TOC_HASH } from '../../store/gql-def'\n\nexport default function ArticleContent({ article, mdContent }: any) {\n    const location = useLocation();\n    let { data } = useQuery(FETCH_ACTIVE_TOC_HASH);\n\n    const activeTocHash = location.hash || (data && data.activeTocHash);\n    let win:any = window;\n\n    useEffect(() => {\n        if (!mdContent) return;\n        if (activeTocHash && location.hash) {\n            const tObj: any = document.getElementById(activeTocHash.replace(/^#/, ''));\n            if (tObj) {\n                win.removeEventListener(\"scroll\", win.utils.scrollPosition);\n                window.scrollTo({\n                    left: 0,\n                    top: tObj.offsetTop,\n                    behavior: 'smooth'\n                })\n                window.onscroll = (e:any) => {\n                    let currentScrollOffset = window.pageYOffset || document.documentElement.scrollTop\n                    if (currentScrollOffset === tObj.offsetTop) {\n                        window.onscroll = null;\n                        win.addEventListener(\"scroll\", win.utils.scrollPosition);\n                    }\n                }\n                // setTimeout(function(){\n                //     win.addEventListener(\"scroll\", win.utils.scrollPosition);\n                // }, 2000)\n            }\n        }\n\n    })\n    return (\n        <div className=\"page-container\">\n            <div className=\"page-header\">\n                <div className=\"page-header-inner\">\n                    <h1>{article && article.name}</h1>\n                    <i className=\"fas fa-list-ul mobile-toc-icon\"></i>\n                </div>\n            </div>\n            <div className=\"page-body\" dangerouslySetInnerHTML={{ __html: mdContent }}>\n            </div>\n            <div className=\"page-footer\">\n            </div>\n        </div>\n    )\n}","import React, { useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport { useQuery, useApolloClient } from '@apollo/react-hooks'\nimport { FETCH_TOC } from '../../store/gql-def'\n\nexport default function ArticleTOC() {\n    const apolloClient = useApolloClient();\n    const location  = useLocation();\n    const anchorHash = location.hash.slice(1);\n\n    const { data } = useQuery(FETCH_TOC);\n    let renderedToc;\n    if (data) {\n        renderedToc = renderToc(data.toc, anchorHash);\n    }\n    useEffect(()=>{\n        // setTimeout(() => {\n        //     win.utils.activateTOCAnchor(anchorHash, true)\n        // }, 1000)\n        win.utils.activateTOCAnchor(anchorHash, true)\n        apolloClient.writeData({data: {activeTocHash: anchorHash}})\n        // apolloClient.writeQuery({ query: FETCH_ACTIVE_TOC_HASH, data: {activeTocHash: anchorHash} });\n    }, [anchorHash])\n    return (\n        <div className=\"page-side\">\n            <div className=\"sticky-container\">\n                <div className=\"toc-wrapper\">\n                    <div className=\"toc-inner\">\n                        <div className=\"toc-inner-content\">\n                            <div className=\"indicator\" id=\"indicator\"></div>\n                            <div className=\"toc-header\">\n                                <i className=\"fas fa-list-ul toc-icon\"></i>\n                                <span className=\"toc-title\">CONTENTS</span>\n                            </div>\n                            <div className=\"toc-content\">\n                                <ul className=\"toc-items\">\n                                    {renderedToc}\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    )\n}\n\nconst win:any = window;\nfunction renderToc(toc: any, activeAnchorHash: string) {\n    if (!toc || !toc.c || !toc.c.length) return;\n    if (!activeAnchorHash) {\n        activeAnchorHash = win.utils.createHashByTOCName(toc.c[0].n); \n    }\n\n    const content = toc.c.map((subToc: any) => {\n        return <RenderTocItem level=\"1\" key={subToc.n} toc={subToc} activeAnchorHash={activeAnchorHash} />;\n    })\n    return (content);\n}\n\nfunction RenderTocItem({ level, toc, activeAnchorHash }: any) {\n    activeAnchorHash = activeAnchorHash || '';\n    let anchorHash = win.utils.createHashByTOCName(toc.n);\n    let tocAnchorHash = win.utils.createTOCAnchorNameByHash(anchorHash);\n    win.tocs.push(anchorHash)\n\n    let activeName = (toc.n && activeAnchorHash === anchorHash) ? 'active' : ''\n\n    let subTocContent = [];\n    if (toc.c) {\n        subTocContent = toc.c.map((subToc: any) => {\n            return <RenderTocItem key={subToc.n} toc={subToc} activeAnchorHash={activeAnchorHash} />;\n        })\n    }\n    return (\n        <li id={tocAnchorHash}>\n            <a href={'#' + anchorHash} onClick={()=>{\n                win.utils.activateTOCAnchor(anchorHash, true)\n            }} className={activeName}><div>{toc.n}</div></a>\n            {subTocContent.length > 0 &&\n                <ul>\n                    {subTocContent}\n                </ul>\n            }\n        </li>\n    );\n}","import MarkdownIt from 'markdown-it';\nimport MarkdownItAnchor from 'markdown-it-anchor'\n//  import MarkdownItTocDoneRight from 'markdown-it-toc-done-right'\nimport hljs from 'highlight.js';\n\nfunction iteratePathIds(articles: Array<any>, parentIds?: Array<number>) {\n    let pathIdsMap: any = {}\n    Object.values(articles).map(item => {\n        parentIds = parentIds || []\n        item.path_ids = parentIds.concat(item.id);\n        pathIdsMap[item.id] = item.path_ids;\n\n        item.is_open = false;\n        item.is_active = false;\n        if (item.children) {\n            const b = iteratePathIds(item.children, item.path_ids);\n            pathIdsMap = Object.assign(pathIdsMap, b)\n        }\n        return true;\n    })\n    return pathIdsMap;\n}\n\nfunction setActiveArticlePath(articles: Array<any>, paths: Array<number>) {\n    paths = paths || [];\n    // const currArticle = articles[paths[0]]; // for git branch 'master', it's a map\n    const currArticle = articles.find(element => element.id === paths[0]);\n    if (!currArticle) return;\n    currArticle.is_open = true;\n    if (paths.length === 1) { // 路径中的最后一个节点(当前节点)\n        currArticle.is_active = true;\n    }\n    if (currArticle.children) {\n        setActiveArticlePath(currArticle.children, paths.slice(1));\n    }\n}\n\nfunction parseMD(article: any, callback: any) {\n    const mdContent = article ? article.content : '';\n    if (!mdContent) return mdContent;\n\n    function tocCallback(html: any, ast: any) {\n        callback(html, ast)\n    };\n\n    const md: any = MarkdownIt({\n        html: true,\n        xhtmlOut: true,\n        typographer: true,\n        highlight: function (str, lang) {\n            if (lang && hljs.getLanguage(lang)) {\n                try {\n                    return '<pre class=\"hljs\"><code>' +\n                        hljs.highlight(lang, str, true).value +\n                        '</code></pre>';\n                } catch (__) { }\n            }\n\n            return '<pre class=\"hljs\"><code>' + md.utils.escapeHtml(str) + '</code></pre>';\n        }\n    }).use(MarkdownItAnchor, {\n        permalink: true,\n        permalinkBefore: true,\n        // permalinkSymbol: '§',\n    }).use(require('markdown-it-toc-done-right').default, {\n        callback: tocCallback\n    });\n    return md.render(mdContent)\n}\n\nexport default {\n    parseMD,\n    updateClientCourse: function(courseObj, articleObj) {\n        let articleId = parseInt(courseObj.start_article_id);\n\n        if (articleObj) {\n            articleId = articleObj.id;\n            courseObj.activeArticle = articleObj\n        }\n\n        // client state： is_open, is_active\n        courseObj.path_ids_map = iteratePathIds(courseObj.articles);\n        setActiveArticlePath(courseObj.articles, courseObj.path_ids_map[articleId])\n        return courseObj;\n    }\n}","import React, { useEffect, useState } from 'react'\nimport { useQuery, useMutation } from '@apollo/react-hooks';\n\nimport ArticleContent from './ArticleContent'\nimport ArticleTOC from './ArticleTOC'\nimport 'highlight.js/styles/solarized-dark.css';\nimport apis from '../../store/apis'\nimport { COURSE_SUMMARY, ARTICLE_DETAIL, UPDATE_TOC_DATA } from '../../store/gql-def'\nimport { useParams } from 'react-router-dom';\n\nexport default function Article() {\n    let { courseId, articleId } = useParams()\n    const [article, setArticle]: any = useState({ activeArticle: {} })\n    const [mdContent, setMDContent] = useState('');\n    articleId = (articleId || 0) / 1\n    courseId = ((courseId || 0) / 1) || 10\n\n    const { data: summaryData } = useQuery(\n        COURSE_SUMMARY, {\n        variables: {\n            courseId: courseId || 0\n        }\n    });\n\n    const { data: articleData } = useQuery(\n        ARTICLE_DETAIL, {\n        variables: {\n            id: articleId || 0\n        }\n    });\n\n    const [updateTOC] = useMutation(UPDATE_TOC_DATA)\n\n    useEffect(() => {\n        if (!summaryData && !articleData) return;\n\n        let realArticle;\n        if (articleData && articleData.article.detail) {\n            realArticle = articleData.article.detail;\n        } else if (summaryData) {\n            realArticle = summaryData.course.summary.activeArticle;\n        }\n        const newContent = apis.parseMD(realArticle, (html, ast) => {\n            updateTOC({ variables: { toc: ast } })\n        });\n\n        setArticle(realArticle)\n        setMDContent(newContent);\n    }, [articleData, summaryData]);\n    return (\n        <div className=\"whole-content-page\">\n            <div className=\"whole-content-sticky\">\n                <ArticleContent article={article} mdContent={mdContent}></ArticleContent>\n                <ArticleTOC />\n            </div>\n        </div>\n    )\n}","import React from 'react'\nimport { Link, useParams } from 'react-router-dom'\nimport { useQuery } from '@apollo/react-hooks';\nimport { COURSE_SUMMARY } from '../../store/gql-def'\n\nexport default function Chapter() {\n    let course: any = {};\n\n    let { courseId, articleId } = useParams();\n    articleId = (articleId || 0) / 1\n    courseId = ((courseId || 0) / 1) || 10\n\n    const { data: summaryData } = useQuery(COURSE_SUMMARY, { variables: { courseId } });\n\n    let list = [];\n    if (summaryData) {\n        list = iterate(summaryData.course.summary.articles, courseId, articleId);\n    }\n\n    return (\n        <div className=\"content-nav\" id=\"sidebar\">\n            <div className=\"content-nav-inner\">\n                <div className=\"course-name\">{course.name}</div>\n                <ul>\n                    {list}\n                </ul>\n            </div>\n        </div>\n    )\n}\n\nfunction iterate(articleMap: Array<any>, courseId: string, activeArticleId: string, level?: number): any {\n    level = level || 1;\n    let articles = articleMap;\n    articles = articles || []\n    // Object.values(articleMap);\n    articles = articles.sort(function (a: any, b: any): number {\n        return (a.seq < b.seq) ? -1 : 1;\n    })\n    return articles.map((item: any) => {\n        let subMenus = <></>;\n        let iconStyle = 'fas';\n        let aClass = item.parent_id ? '' : 'top';\n        if (item.is_active) {\n            aClass += ' active';\n        }\n        if (item.id === activeArticleId) {\n            item.is_open = true;\n            item.active = true;\n        }\n        if (item.children) {\n            if (item.is_open) {\n                iconStyle += ' fa-chevron-down'\n                level = level || 1;\n                subMenus = iterate(item.children, courseId, activeArticleId, level + 1);\n            } else {\n                iconStyle += ' fa-chevron-right'\n            }\n        }\n        let url = `/course/${courseId}/${item.id}`;\n        return <li key={item.name}>\n            <Link className={aClass} to={url}>\n                <span>{item.name}</span>\n                {item.children ? <i className={iconStyle}></i> : ''}\n            </Link>\n            {!item.children ? '' :\n                <ul className=\"sub-menu\">\n                    {subMenus}\n                </ul>\n            }\n        </li>\n    });\n}","import React, { useEffect, useState } from 'react'\nimport Article from './course/Article'\nimport Chapter from './course/Chapter'\nimport { useParams } from 'react-router-dom'\nimport { useQuery } from '@apollo/react-hooks';\nimport { COURSE_SUMMARY, ARTICLE_DETAIL } from '../store/gql-def'\nimport apis from '../store/apis'\n\nexport default function Course() {\n    let { courseId, articleId } = useParams();\n    // const [course, setCourse] = useState<any>({})\n    const [, setArticle] = useState<any>({})\n\n    articleId = (articleId || 0) / 1\n    courseId = ((courseId || 0) / 1) || 10\n\n    const { data: summaryData } = useQuery(\n        COURSE_SUMMARY, { variables: { courseId } }\n    );\n\n    const { data: articleData } = useQuery(\n        ARTICLE_DETAIL, { variables: { id: articleId } }\n    );\n    // console.info('------course func.')\n    useEffect(() => {\n        if (!summaryData) return;\n        const articleObj = (articleData && articleData.article) && articleData.article.detail;\n        const courseObj = apis.updateClientCourse(summaryData.course.summary, articleObj)\n\n        // 神奇的语句，如果不设置该 state，course.activeArticle是旧的值\n        setArticle(courseObj.activeArticle)\n        // console.info('how causse. articleObj..', articleObj)\n        // setCourse(courseObj);\n        // console.error('Course courseObj>>>>', courseObj.id)\n    }, [summaryData, articleData])\n    return (\n        <div className=\"body-container\">\n            <Chapter />\n            <Article/>\n        </div>\n    )\n}","import React from 'react'\nimport '../assets/styles/catalog.less'\n\nexport default function () {\n    // https://www.codecademy.com/catalog/subject/all\n    return (\n        <ul className=\"catalog\">\n            <li className=\"card-item\">\n                <a href=\"/course/10\">\n                    <div className=\"card-item-inner\">\n                        <div className=\"logo\">\n                            <img alt=\"course title\" src=\"/assets/images/2.svg\" />\n                        </div>\n                        <div className=\"summary\">\n                            <h3 className=\"title\">\n                                C Language\n                            </h3>\n                            <p className=\"intro\">\n                                Looking for an introduction to the theory behind programming? Master C while learning data structures, algorithms, and more!\n                            </p>\n                            <ul className=\"tags\">\n                                <li>C</li>\n                                <li>Data Structure</li>\n                                <li>Command Line</li>\n                                <li>Git</li>\n                            </ul>\n                        </div>\n                    </div>\n                </a>\n            </li>\n            <li className=\"card-item\">\n                <a href=\"/course/20\">\n                    <div className=\"card-item-inner\">\n                        <div className=\"logo\">\n                            <img alt=\"course title\" src=\"/assets/images/1.svg\" />\n                        </div>\n                        <div className=\"summary\">\n                            <h3 className=\"title\">\n                            Foundation of CS\n                            </h3>\n                            <p className=\"intro\">\n                                Interested in learning how to code, but unsure where to start? This is the path for you!\n                            </p>\n                            <ul className=\"tags\">\n                                <li>Computer Science History</li>\n                                <li>Career Exploration</li>\n                                <li>Application</li>\n                            </ul>\n                        </div>\n                    </div>\n                </a>\n            </li>\n        </ul>\n    )\n}","import React from 'react'\n\nexport default function() {\n    return (\n        <div className=\"page-not-found\">\n            <h1>Page Not Found.</h1>\n        </div>\n    )\n}","import React from 'react'\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom'\n\nimport Header from './components/Header'\nimport Course from './components/Course'\nimport Catalog from './components/Catalog'\nimport NotFound from './components/NotFound'\n\nexport default function App() {\n    return (\n        <Router>\n            <div>\n                <Header></Header>\n                <Switch>\n                    <Route path=\"/course/:courseId/:articleId?\">\n                        <Course />\n                    </Route>\n                    <Route path=\"/courses\">\n                        <Redirect to=\"/\" />\n                    </Route>\n                    <Route exact path=\"/index.html\">\n                        <Redirect to=\"/\" />\n                    </Route>\n                    <Route exact path=\"/\">\n                        <Catalog />\n                    </Route>\n                    <Route path=\"*\">\n                        <NotFound />\n                    </Route>\n                </Switch>\n            </div>\n        </Router>\n    )\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ApolloClient } from 'apollo-client';\nimport { InMemoryCache, NormalizedCacheObject } from 'apollo-cache-inmemory';\nimport { HttpLink } from 'apollo-link-http';\nimport { ApolloProvider } from '@apollo/react-hooks';\nimport { resolvers, typeDefs } from './store/resolvers';\n\nimport config from './store/config'\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport './index.css';\n\nconst cache = new InMemoryCache();\nconst client: ApolloClient<NormalizedCacheObject> = new ApolloClient({\n  cache,\n  link: new HttpLink({\n    uri: config.baseApiUrl,\n    headers: {\n      // authorization: localStorage.getItem('token'),\n      'client-name': 'Magic Mooc Admin[web]',\n      'client-version': '1.0.0',\n    },\n  }),\n  resolvers,\n  typeDefs,\n});\n\nReactDOM.render(\n  // <React.StrictMode>\n  <ApolloProvider client={client}>\n    <App />\n  </ApolloProvider>\n  // </React.StrictMode>\n  , document.getElementById('root')\n);\n\nserviceWorker.unregister();\n","import gql from 'graphql-tag';\n\nexport const COURSE_LIST = gql`\n    query CourseList($pageNo: Int){\n        course {\n            list (pageNo: $pageNo){\n                id,name,price,summary\n            }\n        }\n    }\n`;\n\nexport const COURSE_DETAIL = gql`\n    query CourseDetail($id: Int!){\n        course {\n            detail (id: $id){\n                id,name,price,summary\n            }\n        }\n    }\n`;\n\nexport const COURSE_SUMMARY = gql`\n    query CourseSummary($courseId: Int!){\n        course {\n            summary (id: $courseId) {\n                id,name,summary,start_article_id,\n                activeArticle{\n                    id,name,content\n                },\n                articles {\n                    is_open @client, is_active @client, id,name,seq, parent_id,level,children {\n                        is_open @client, is_active @client, id,name,seq,parent_id,level,children {\n                            is_open @client, is_active @client, id,name,seq,parent_id,level\n                        }\n                    }\n                }\n            }\n        }\n    }\n`\n\nexport const COURSE_SAVE = gql`\n    mutation CourseSave($data: CourseInputType!){\n        course {\n            save (data: $data){\n                id, name, summary, price\n            }\n        }\n    }\n`\n\nexport const COURSE_REMOVE = gql`\n    mutation CourseRemove($id: Int!){\n        course {\n            remove (id: $id){\n                error, message\n            }\n        }\n    }\n`;\n\nexport const ARTICLE_DETAIL = gql`\n    query ArticleDetail($id: Int!){\n        article {\n            detail (id: $id){\n                id,name,content\n            }\n        }\n    }\n`;\n\nexport const FETCH_TOC = gql`\n    query FetchToc{\n        toc @client\n    }\n`;\n\nexport const FETCH_ACTIVE_TOC_HASH = gql`\n    query FetchActiveTocHash {\n        activeTocHash @client\n    }\n`;\n\nexport const UPDATE_TOC_DATA = gql`\n    mutation UpdateTOCData($toc: TOC) {\n        updateTOCData(toc: $toc) @client\n    }\n`;\n","// const baseApiUrl = 'http://api.magicmooc.org/graphql';\n// const baseApiUrl = 'http://localhost:4000/graphql';\nconst baseApiUrl = 'https://mooc-api.banyuan.club/';\n\nexport default {\n    baseApiUrl\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n"],"sourceRoot":""}