(this["webpackJsonpmagic-mooc"]=this["webpackJsonpmagic-mooc"]||[]).push([[2],{12:function(e,a,t){"use strict";t.d(a,"c",(function(){return d})),t.d(a,"b",(function(){return v})),t.d(a,"f",(function(){return h})),t.d(a,"e",(function(){return E})),t.d(a,"d",(function(){return f})),t.d(a,"a",(function(){return p}));var n=t(15),c=t(16),r=t.n(c);function i(){var e=Object(n.a)(["\n    query ArticleDetail($id: Int!){\n        article {\n            detail (id: $id){\n                id,name,content\n            }\n        }\n    }\n"]);return i=function(){return e},e}function l(){var e=Object(n.a)(["\n    mutation CourseRemove($id: Int!){\n        course {\n            remove (id: $id){\n                error, message\n            }\n        }\n    }\n"]);return l=function(){return e},e}function s(){var e=Object(n.a)(["\n    mutation ($data: CourseInputType!){\n        course {\n            save (data: $data){\n                id, name, summary, price\n            }\n        }\n    }\n"]);return s=function(){return e},e}function o(){var e=Object(n.a)(["\n    query CourseSummary($courseId: Int!){\n        course {\n            summary (id: $courseId) {\n                id,name,summary,start_article_id,\n                activeArticle{\n                    id,name,content\n                },\n                articles {\n                    is_open @client, is_active @client, id,name,seq, parent_id,level,children {\n                        is_open @client, is_active @client, id,name,seq,parent_id,level,children {\n                            is_open @client, is_active @client, id,name,seq,parent_id,level\n                        }\n                    }\n                }\n            }\n        }\n    }\n"]);return o=function(){return e},e}function m(){var e=Object(n.a)(["\n    query ($id: Int!){\n        course {\n            detail (id: $id){\n                id,name,price,summary\n            }\n        }\n    }\n"]);return m=function(){return e},e}function u(){var e=Object(n.a)(["\n    query ($pageNo: Int){\n        course {\n            list (pageNo: $pageNo){\n                id,name,price,summary\n            }\n        }\n    }\n"]);return u=function(){return e},e}var d=r()(u()),v=r()(m()),h=r()(o()),E=r()(s()),f=r()(l()),p=r()(i())},122:function(e,a,t){e.exports=t(403)},397:function(e,a,t){},403:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(51),i=t.n(r),l=t(32),s=t(86),o=t(85),m=t(14),u=t(15),d=t(16);function v(){var e=Object(u.a)(["\n  extend type ArticleTreeType {\n    is_open: Boolean,\n    is_active: Boolean\n  }\n"]);return v=function(){return e},e}var h=t.n(d)()(v()),E=t(66),f=t(63),p=t(20),g=t(46),b=t(112),N=t(48);var O=Object(N.c)({course:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{articles:[],activeArticle:{},path_ids_map:{}},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"COURSE_FETCHED":return Object.assign({},e,a.course)}return e},activeArticle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:0},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ARTICLE_ACTIVATE":return Object.assign({},e,a.activeArticle)}return e},toc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"TOC_REFRESH":return Object.assign({},e,a.ast)||{}}return e},activeTocHash:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"TOC_ACTIVATE":return a.tocHash}return e}}),y=Object(N.d)(O,Object(N.a)(b.a));function j(){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"header-left-column"},c.a.createElement("div",{className:"mobile-button"},c.a.createElement("i",{className:"fas fa-bars"})),c.a.createElement("div",{className:"header-logo"},c.a.createElement("div",{className:"mobile-logo"},c.a.createElement("a",{href:"/",className:"logo-link"},c.a.createElement("img",{src:"/assets/images/logo.svg",alt:"logo"}))),c.a.createElement("div",{className:"desktop-logo"},c.a.createElement("a",{href:"/",className:"logo-link"},c.a.createElement("img",{src:"/assets/images/logo.svg",alt:"logo"})))),c.a.createElement("div",{className:"mobile-button"},c.a.createElement("i",{className:"fas fa-search"}))),c.a.createElement("div",{className:"header-inner-wrapper"},c.a.createElement("div",{className:"header-inner"},c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/courses"},c.a.createElement("span",null,"Catalog"))),c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/"},c.a.createElement("span",null,"About"))),c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/"},c.a.createElement("span",null,"Term"))),c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:"/"},c.a.createElement("span",null,"Privacy"))))),c.a.createElement("div",{className:"search-input-wrapper"},c.a.createElement("div",{className:"input-container"},c.a.createElement("i",{className:"fa fa-search"}),c.a.createElement("input",{placeholder:"Search..."}))))}var _=t(19),w=t(17),A=Object(f.b)((function(e){return{activeTocHash:e.activeTocHash}}))((function(e){var a=e.course,t=e.mdContent,r=e.activeTocHash,i=Object(g.g)();r=i.hash||r;var l=window;return Object(n.useEffect)((function(){if(t&&r&&i.hash){var e=document.getElementById(r.replace(/^#/,""));e&&(l.removeEventListener("scroll",l.utils.scrollPosition),window.scrollTo({left:0,top:e.offsetTop,behavior:"smooth"}),window.onscroll=function(a){(window.pageYOffset||document.documentElement.scrollTop)===e.offsetTop&&(window.onscroll=null,l.addEventListener("scroll",l.utils.scrollPosition))})}})),c.a.createElement("div",{className:"page-container"},c.a.createElement("div",{className:"page-header"},c.a.createElement("div",{className:"page-header-inner"},c.a.createElement("h1",null,a.activeArticle&&a.activeArticle.name),c.a.createElement("i",{className:"fas fa-list-ul mobile-toc-icon"}))),c.a.createElement("div",{className:"page-body",dangerouslySetInnerHTML:{__html:t}}),c.a.createElement("div",{className:"page-footer"}))}));var C=Object(f.b)((function(e){return{toc:e.toc}}))((function(e){var a=e.toc,t=e.dispatch,r=Object(g.g)().hash.slice(1),i=function(e,a){if(!e||!e.c||!e.c.length)return;a||(a=I.utils.createHashByTOCName(e.c[0].n));return e.c.map((function(e){return c.a.createElement(k,{level:"1",key:e.n,toc:e,activeAnchorHash:a})}))}(a,r);return Object(n.useEffect)((function(){I.utils.activateTOCAnchor(r,!0),t({type:"TOC_ACTIVATE",tocHash:T})})),c.a.createElement("div",{className:"page-side"},c.a.createElement("div",{className:"sticky-container"},c.a.createElement("div",{className:"toc-wrapper"},c.a.createElement("div",{className:"toc-inner"},c.a.createElement("div",{className:"toc-inner-content"},c.a.createElement("div",{className:"indicator",id:"indicator"}),c.a.createElement("div",{className:"toc-header"},c.a.createElement("i",{className:"fas fa-list-ul toc-icon"}),c.a.createElement("span",{className:"toc-title"},"CONTENTS")),c.a.createElement("div",{className:"toc-content"},c.a.createElement("ul",{className:"toc-items"},i)))))))}));var T="",I=window;function k(e){e.level;var a=e.toc,t=e.activeAnchorHash;t=t||"";var n=I.utils.createHashByTOCName(a.n),r=I.utils.createTOCAnchorNameByHash(n);I.tocs.push(n);var i=a.n&&t===n?"active":"";i&&(T=n);var l=[];return a.c&&(l=a.c.map((function(e){return c.a.createElement(k,{key:e.n,toc:e,activeAnchorHash:t})}))),c.a.createElement("li",{id:r},c.a.createElement("a",{href:"#"+n,onClick:function(){I.utils.activateTOCAnchor(n,!0)},className:i},c.a.createElement("div",null,a.n)),l.length>0&&c.a.createElement("ul",null,l))}t(131);var H=t(114),S=t.n(H),$=t(115),q=t(97),B=t.n(q);var L={parseMD:function(e){var a=e&&e.activeArticle?e.activeArticle.content:"";if(!a)return a;var n=S()({html:!0,xhtmlOut:!0,typographer:!0,highlight:function(e,a){if(a&&B.a.getLanguage(a))try{return'<pre class="hljs"><code>'+B.a.highlight(a,e,!0).value+"</code></pre>"}catch(t){}return'<pre class="hljs"><code>'+n.utils.escapeHtml(e)+"</code></pre>"}}).use($.a,{permalink:!0,permalinkBefore:!0}).use(t(395).default,{callback:function(e,a){}});return n.render(a)},updateClientCourse:function(e,a,t){return t?(e.activeArticle=a,console.error("Course: courseObj.activeArticle>>>",t,e.activeArticle.name)):t=parseInt(e.start_article_id),e.activeArticle=a,e.path_ids_map=function e(a,t){var n={};return Object.values(a).map((function(a){if(t=t||[],a.path_ids=t.concat(a.id),n[a.id]=a.path_ids,a.is_open=!1,a.is_active=!1,a.children){var c=e(a.children,a.path_ids);n=Object.assign(n,c)}return!0})),n}(e.articles),function e(a,t){t=t||[];var n=a.find((function(e){return e.id===t[0]}));n&&(n.is_open=!0,1===t.length&&(n.is_active=!0),n.children&&e(n.children,t.slice(1)))}(e.articles,e.path_ids_map[t]),e}},x=t(12);function D(e){var a=e.course,t=Object(n.useState)({activeArticle:{}}),r=Object(_.a)(t,2),i=r[0],l=r[1],s=Object(n.useState)(""),o=Object(_.a)(s,2),m=o[0],u=o[1],d=Object(w.b)(x.f,{variables:{courseId:a.id}}),v=d.data;d.loading,d.error;return Object(n.useEffect)((function(){if(v){var e=v.course.summary,a=L.parseMD(e);l(e),u(a)}})),c.a.createElement("div",{className:"whole-content-page"},c.a.createElement("div",{className:"whole-content-sticky"},c.a.createElement(A,{course:i,mdContent:m}),c.a.createElement(C,null)))}function M(){var e={},a=Object(g.h)(),t=a.courseId,n=a.articleId;t/=1;var r=Object(w.b)(x.f,{variables:{courseId:t}}).data;r&&(e=r.course.summary);var i=function e(a,t,n,r){r=r||1;var i=a;return(i=(i=i||[]).sort((function(e,a){return e.seq<a.seq?-1:1}))).map((function(a){var i=c.a.createElement(c.a.Fragment,null),l="fas",s=a.parent_id?"":"top";a.is_active&&(s+=" active"),a.id===n&&(a.is_open=!0,a.active=!0),a.children&&(a.is_open?(l+=" fa-chevron-down",r=r||1,i=e(a.children,t,n,r+1)):l+=" fa-chevron-right");var o="/course/".concat(t,"/").concat(a.id);return c.a.createElement("li",{key:a.name},c.a.createElement(p.b,{className:s,to:o},c.a.createElement("span",null,a.name),a.children?c.a.createElement("i",{className:l}):""),a.children?c.a.createElement("ul",{className:"sub-menu"},i):"")}))}(e.articles,t,n);return c.a.createElement("div",{className:"content-nav",id:"sidebar"},c.a.createElement("div",{className:"content-nav-inner"},c.a.createElement("div",{className:"course-name"},e.name),c.a.createElement("ul",null,i)))}function F(){var e=Object(g.h)(),a=e.courseId,t=e.articleId,r=Object(n.useState)({}),i=Object(_.a)(r,2),l=i[0],s=i[1],o=Object(n.useState)({}),m=Object(_.a)(o,2)[1],u=Object(n.useState)(0),d=Object(_.a)(u,2),v=(d[0],d[1]);t/=1,a=(a/=1)||10;var h=Object(w.b)(x.f,{variables:{courseId:a}}).data,E=Object(w.b)(x.a,{variables:{id:t}}).data;return Object(n.useEffect)((function(){if(h&&E&&t&&a){var e=L.updateClientCourse(h.course.summary,E.article.detail,t);m(e.activeArticle),s(e),v(t)}}),[h,E,t,a]),c.a.createElement("div",{className:"body-container"},c.a.createElement(M,null),c.a.createElement(D,{course:l}))}t(397);var R=function(){return c.a.createElement("ul",{className:"catalog"},c.a.createElement("li",{className:"card-item"},c.a.createElement("a",{href:"/course/10"},c.a.createElement("div",{className:"card-item-inner"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{alt:"course title",src:"/assets/images/2.svg"})),c.a.createElement("div",{className:"summary"},c.a.createElement("h3",{className:"title"},"C Language"),c.a.createElement("p",{className:"intro"},"Looking for an introduction to the theory behind programming? Master C while learning data structures, algorithms, and more!"),c.a.createElement("ul",{className:"tags"},c.a.createElement("li",null,"C"),c.a.createElement("li",null,"Data Structure"),c.a.createElement("li",null,"Command Line"),c.a.createElement("li",null,"Git")))))),c.a.createElement("li",{className:"card-item"},c.a.createElement("a",{href:"/course/20"},c.a.createElement("div",{className:"card-item-inner"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{alt:"course title",src:"/assets/images/1.svg"})),c.a.createElement("div",{className:"summary"},c.a.createElement("h3",{className:"title"},"Foundation of CS"),c.a.createElement("p",{className:"intro"},"Interested in learning how to code, but unsure where to start? This is the path for you!"),c.a.createElement("ul",{className:"tags"},c.a.createElement("li",null,"Computer Science History"),c.a.createElement("li",null,"Career Exploration"),c.a.createElement("li",null,"Application")))))))},P=function(){return c.a.createElement("div",{className:"page-not-found"},c.a.createElement("h1",null,"Page Not Found."))};function U(){return c.a.createElement(f.a,{store:y},c.a.createElement(p.a,null,c.a.createElement("div",null,c.a.createElement(j,null),c.a.createElement(g.d,null,c.a.createElement(g.b,{path:"/course/:courseId/:articleId?"},c.a.createElement(F,null)),c.a.createElement(g.b,{path:"/courses"},c.a.createElement(g.a,{to:"/"})),c.a.createElement(g.b,{exact:!0,path:"/index.html"},c.a.createElement(g.a,{to:"/"})),c.a.createElement(g.b,{exact:!0,path:"/"},c.a.createElement(R,null)),c.a.createElement(g.b,{path:"*"},c.a.createElement(P,null))))))}var V=t(67),J=(t(94),new s.a),W=new l.a({cache:J,link:new o.a({uri:E.a.baseApiUrl,headers:{"client-name":"Magic Mooc Admin[web]","client-version":"1.0.0"}}),resolvers:{ArticleTreeType:{is_open:function(e,a,t){t.cache;return!1},is_active:function(e,a,t){t.cache;return!1}}},typeDefs:h});i.a.render(c.a.createElement(m.a,{client:W},c.a.createElement(U,null)),document.getElementById("root")),V.a()},66:function(e,a,t){"use strict";a.a={baseApiUrl:"https://mooc-api.banyuan.club/"}},67:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function n(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},94:function(e,a,t){}},[[122,4,0,5]]]);
//# sourceMappingURL=main.8d001623.chunk.js.map