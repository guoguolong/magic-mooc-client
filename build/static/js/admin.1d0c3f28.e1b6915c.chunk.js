(this["webpackJsonpmagic-mooc"]=this["webpackJsonpmagic-mooc"]||[]).push([[1],{24:function(e,t,a){"use strict";t.a={baseApiUrl:"https://mooc-api.banyuan.club/"}},402:function(e,t,a){e.exports=a(407)},404:function(e,t,a){},405:function(e,t,a){},407:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(42),s=a.n(c),u=a(15),i=a(37),o=(a(73),a(3)),m=a.n(o),l=a(11),p=a(35),f=a(28),d=a(58),b=a(38),E=a.n(b),h=a(24);function v(){return(v=Object(l.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(h.a.baseApiUrl+"course/detail/"+t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(l.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(h.a.baseApiUrl+"course/delete/"+t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(l.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(h.a.baseApiUrl+"course/list");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(l.a)(m.a.mark((function e(t,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=a||0,e.next=3,E.a.post(h.a.baseApiUrl+"course/save/"+a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j={getCourseDetail:function(e){return v.apply(this,arguments)},getCourseList:function(){return w.apply(this,arguments)},courseSave:function(e,t){return x.apply(this,arguments)},deleteCourse:function(e){return y.apply(this,arguments)}},O=(a(404),function(){var e=Object(r.useState)({name:"",id:0,summary:"",price:0}),t=Object(p.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(!1),u=Object(p.a)(s,2),o=u[0],b=u[1],E=Object(r.useState)(""),h=Object(p.a)(E,2),v=h[0],y=h[1],w=Object(i.h)().courseId;return w=w||0,Object(r.useEffect)((function(){Object(l.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getCourseDetail(w);case 2:(t=e.sent)&&c(t);case 4:case"end":return e.stop()}}),e)})))()}),[w]),n.a.createElement("div",{className:"form-container"},n.a.createElement("h1",null,"\u8bfe\u7a0b\u7f16\u8f91"),n.a.createElement("a",{href:"/admin"},"\u56de\u8bfe\u7a0b\u5217\u8868"),n.a.createElement(f.d,{enableReinitialize:!0,initialValues:{name:a.name,id:a.id,summary:a.summary,price:a.price},validationSchema:d.a({name:d.b().max(30,"Must be 30 characters or less").required("Title can not be empty"),summary:d.b().max(500,"Must be 500 characters or less").required("Summary can not be empty"),price:d.b().required("Required")}),onSubmit:function(){var e=Object(l.a)(m.a.mark((function e(t,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setSubmitting,e.next=3,j.courseSave(t,w);case 3:999!==(r=e.sent).error?(c(r),b(!0)):y(r.message);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},n.a.createElement(f.c,{className:"course-form form"},o&&n.a.createElement(i.a,{to:"/admin"}),v&&n.a.createElement("div",{className:"error"},v),n.a.createElement("div",{className:"row"},n.a.createElement("label",{htmlFor:"name"},"\u6807\u9898\uff1a"),n.a.createElement(f.b,{name:"name",type:"text"}),n.a.createElement(f.a,{name:"name"})),n.a.createElement("div",{className:"row"},n.a.createElement("label",{htmlFor:"summary"},"\u7b80\u4ecb\uff1a"),n.a.createElement(f.b,{name:"summary",as:"textarea"}),n.a.createElement(f.a,{name:"summary"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"price"},"\u4ef7\u683c\uff1a"),n.a.createElement(f.b,{name:"price",type:"text"})),n.a.createElement("div",null,n.a.createElement(f.a,{name:"price"}))),n.a.createElement("div",{className:"row center"},n.a.createElement("button",{type:"submit"},"\u5b58 \u50a8")))))});a(405);function g(e){var t=e.item,a=e.updateCourses;return n.a.createElement("li",null,n.a.createElement("span",null,t.id),n.a.createElement("span",null,n.a.createElement(u.b,{to:"/admin/course/"+t.id},t.name)),n.a.createElement("span",null,"\xa5",t.price),n.a.createElement("span",{className:"summary",title:t.summary},t.summary),n.a.createElement("span",{className:"button",onClick:Object(l.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.deleteCourse(t.id);case 2:e.sent.error||a(t.id);case 4:case"end":return e.stop()}}),e)})))},"[DELETE]"))}var k=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1];return Object(r.useEffect)((function(){Object(l.a)(m.a.mark((function e(){var t,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){var r=(a=a.filter((function(t){return t.id!=e}))).map((function(e){return n.a.createElement(g,{key:e.id,item:e,updateCourses:t})}));c(r)},e.next=3,j.getCourseList();case 3:a=e.sent,r=a.map((function(e){return n.a.createElement(g,{key:e.id,item:e,updateCourses:t})})),c(r);case 6:case"end":return e.stop()}}),e)})))()}),[]),n.a.createElement("div",{className:"course-list"},n.a.createElement("h1",null,"\u8bfe\u7a0b\u7ba1\u7406"),n.a.createElement("a",{href:"/admin/course"},"\u65b0\u589e\u8bfe\u7a0b"),n.a.createElement("ul",null,a))},C=a(56);s.a.render(n.a.createElement(u.a,null,n.a.createElement(i.d,null,n.a.createElement(i.b,{path:"/admin/course/:courseId(\\d+)?"},n.a.createElement(O,null)),n.a.createElement(i.b,{path:"/admin"},n.a.createElement(k,null)))),document.getElementById("root")),C.a()},56:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},73:function(e,t,a){}},[[402,3,0,6]]]);
//# sourceMappingURL=admin.1d0c3f28.e1b6915c.chunk.js.map